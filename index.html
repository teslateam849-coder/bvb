<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <title>تسجيل المتسابق</title>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.12.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.1/firebase-firestore.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "ضع مفتاحك هنا",
      authDomain: "project-id.firebaseapp.com",
      projectId: "project-id",
      storageBucket: "project-id.appspot.com",
      messagingSenderId: "....",
      appId: "...."
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
  </script>
</head>
<body>
  <form id="contestantForm">
    <input type="text" id="name" placeholder="الاسم" required />
    <input type="tel" id="phone" placeholder="رقم الجوال" required />
    <input type="text" id="studentId" placeholder="الرقم الجامعي" required />
    <button type="submit">دخول</button>
  </form>

  <script>
    document.getElementById("contestantForm").addEventListener("submit", function (e) {
      e.preventDefault();

      const name = document.getElementById("name").value.trim();
      const phone = document.getElementById("phone").value.trim();
      const studentId = document.getElementById("studentId").value.trim();
      const entryTime = new Date().toLocaleString();

      db.collection("contestants").add({
        name,
        phone,
        universityId: studentId,
        time: entryTime,
        score: 0
      })
      .then(docRef => {
        localStorage.setItem("contestantId", docRef.id);
        window.location.href = "contestant.html";
      })
      .catch(error => {
        alert("حدث خطأ في التسجيل: " + error.message);
      });
    });
  </script>
</body>
</html>

